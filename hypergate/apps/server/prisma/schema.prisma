// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Deposit status enum
enum DepositStatus {
  PENDING
  BRIDGING
  DEPOSITING
  COMPLETED
  FAILED
}

// Deposit record for tracking bridge transactions
model Deposit {
  id                String        @id @default(uuid())
  userAddress       String        @db.VarChar(42)
  sourceChain       String
  sourceToken       String
  sourceAmount      String
  destinationAmount String
  bridgeTxHash      String?       @db.VarChar(66)
  depositTxHash     String?       @db.VarChar(66)
  status            DepositStatus @default(PENDING)
  errorMessage      String?
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
  completedAt       DateTime?

  @@index([userAddress])
  @@index([status])
  @@index([createdAt])
}
